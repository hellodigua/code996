var $=Object.defineProperty,M=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var D=(t,e,u)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[e]=u,N=(t,e)=>{for(var u in e||(e={}))W.call(e,u)&&D(t,u,e[u]);if(v)for(var u of v(e))H.call(e,u)&&D(t,u,e[u]);return t},T=(t,e)=>M(t,P(e));import{r as L}from"./index.64d01915.js";const w=Vue.defineComponent({props:{data:{type:Array,default:()=>[]}},setup(t){const e=t,u=Vue.ref(null);function a(){new chartXkcd.Bar(u.value,{data:{labels:e.data.map(n=>n.time),datasets:[{data:e.data.map(n=>n.count)}]},options:{backgroundColor:"#212121",strokeColor:"#fff",unxkcdify:!1}})}return Vue.onMounted(()=>{Vue.nextTick(()=>{a()})}),(n,o)=>(Vue.openBlock(),Vue.createElementBlock("svg",{class:"bar-chart",ref_key:"bar",ref:u},null,512))}}),g=Vue.defineComponent({props:{data:{type:Array,default:()=>[]}},setup(t){const e=t,u=Vue.ref(null);function a(){new chartXkcd.Pie(u.value,{data:{labels:e.data.map(n=>n.time),datasets:[{data:e.data.map(n=>n.count)}]},options:{backgroundColor:"#212121",strokeColor:"#fff"}})}return Vue.onMounted(()=>{Vue.nextTick(()=>{a()})}),(n,o)=>(Vue.openBlock(),Vue.createElementBlock("svg",{class:"bar-chart",ref_key:"bar",ref:u},null,512))}});function A(t){const{openingTime:e,closingTime:u}=q(t),{workHourPl:a}=I(t,e);return{openingTime:e,closingTime:u,workHourPl:a}}function q(t){const e=t.reduce((c,r)=>c+r.count**2,0)/t.length,u=Math.sqrt(e),n=t.map((c,r)=>{var s,m;const V=c.count/u;return T(N({},c),{score:V,prevScore:(c.count-(((s=t[r-1])==null?void 0:s.count)||c.count))/u,nextScore:((((m=t[r+1])==null?void 0:m.count)||c.count)-c.count)/u})}).filter(c=>c.score>=.45),o=n.filter(c=>+c.time>=8&&+c.time<=12),i=n.filter(c=>+c.time>=17&&+c.time<=23),d=o.sort((c,r)=>Number(c.time)-Number(r.time))[0],l=i.sort((c,r)=>Number(r.time)-Number(c.time))[0];return{openingTime:d,closingTime:l}}function I(t=[],e){const u=t.filter(s=>+s.time>=+(e==null?void 0:e.time)&&+s.time<=+(e==null?void 0:e.time)+9),a=t.filter(s=>!u.includes(s)),n=u.reduce((s,m)=>s+m.count,0),o=a.reduce((s,m)=>s+m.count,0),i=t.sort((s,m)=>m.count-s.count),d=i.slice(0,9),l=i.slice(9,i.length+1),c=d.reduce((s,m)=>s+m.count,0),r=l.reduce((s,m)=>s+m.count,0);return{workHourPl:[{time:"\u5DE5\u4F5C",count:n,timeCount:d.length},{time:"\u52A0\u73ED",count:o,timeCount:l.length}],workingTimeCount:n,workingElseTimeCount:o,top9TimeCount:c,top9ElseTimeCount:r}}function x(t){return t.reduce((e,u)=>e+u.count,0)}function h(t,e,u=2){return+(t/e*100).toFixed(u)}function F(t=[]){return t[Math.floor(Math.random()*t.length)]}function b(t){const e=t.slice(0,5),u=t[5],a=t[6],n=x(t),o={workday:x(e),saturday:u.count,sunday:a.count},i={workday:h(o.workday,n),saturday:h(o.saturday,n),sunday:h(o.sunday,n)},d=[{time:"\u5DE5\u4F5C\u65E5",count:o.workday},{time:"\u5468\u672B",count:o.saturday+o.sunday}],l=U(i),r=[5,6,6,7,7][l-1];return{totalCount:n,commitCount:o,commitRatio:i,workDayType:l,workDayTypeValue:r,workWeekPl:d}}function U(t){let e=1;return t.workday>=90?e=1:t.workday>=85&&t.workday<90?e=2:t.workday>=79&&t.workday<85?e=3:t.workday>=72&&t.workday<79?e=4:t.workday<72&&(e=5),e}function S(t=""){let e=[];return t.split(",").forEach(u=>{const a=u.split("_");e.push({time:a[1],count:Number(a[0])})}),e}function z(t){return[{name:"\u5468\u4E00",key:"1"},{name:"\u5468\u4E8C",key:"2"},{name:"\u5468\u4E09",key:"3"},{name:"\u5468\u56DB",key:"4"},{name:"\u5468\u4E94",key:"5"},{name:"\u5468\u516D",key:"6"},{name:"\u5468\u65E5",key:"7"}].map(u=>{const a=t.find(n=>n.time===u.key);return{time:u.name,count:(a==null?void 0:a.count)||0}})}function G(){const t=VueRouter.useRouter(),{query:e}=t.currentRoute.value;(!e.time||!e.hour||!e.week)&&t.push({name:"index",query:{error:"url_query_error"}})}function f(){const t=VueRouter.useRouter(),{query:e}=t.currentRoute.value,u=S(e.hour),a=z(S(e.week)),n=e.time.split("_"),o=`${n[0]} \u223C ${n[1]}`,i=u.reduce((d,l)=>d+l.count,0);return{hourData:u,weekData:a,timeRange:n,timeStr:o,totalCount:i}}function X(){const{hourData:t,weekData:e,totalCount:u}=f(),{openingTime:a,closingTime:n,workHourPl:o}=A(t),{workDayTypeValue:i,workWeekPl:d}=b(e),{index996:l,index996Str:c,overTimeRadio:r,isStandard:V}=R({workHourPl:o,workWeekPl:d,hourData:t}),s=j({workHourPl:o,workWeekPl:d,index996:l,overTimeRadio:r}),m=Number(a==null?void 0:a.time),E=Number(n==null?void 0:n.time)%12;return{workingType:`${m||"?"}${E||"?"}${i||"?"}`,workingTypeStr:`\u65E9 ${m||"?"} \u665A ${E||"?"} \u4E00\u5468 ${i||"?"} \u5929`,openingTime:a,closingTime:n,workDayTypeValue:i,workHourPl:o,workWeekPl:d,totalCount:u,index996:l,index996Str:c,overTimeRadio:r,isStandard:V,MSG_TYPE:s}}function R({workHourPl:t,workWeekPl:e,hourData:u}){const a=t[0].count,n=t[1].count,o=e[0].count,i=e[1].count,d=(n+a*i/(o+i)).toFixed(0),l=a+n;let c=Math.ceil(d/l*100);c===0&&u.length<9&&(c=Y({hourData:u,totalCount:l}));const r=c*3,V=r<200&&l>50;let s="";return r<=10?s=F(["\u4EE4\u4EBA\u7FA1\u6155\u7684\u5DE5\u4F5C","\u606D\u559C\uFF0C\u4F60\u4EEC\u6CA1\u6709\u798F\u62A5","\u4F60\u5C31\u662F\u642C\u7816\u754C\u7684\u6B27\u7687\u5427"]):r>10&&r<=50?s=F(["\u4F60\u8FD8\u6709\u5269\u4F59\u4EF7\u503C"]):r>50&&r<=90?s=F(["\u52A0\u6CB9\uFF0C\u8001\u677F\u7684\u6CD5\u62C9\u5229\u9760\u4F60\u4E86"]):r>90&&r<=110?s=F(["\u4F60\u7684\u798F\u62A5\u5DF2\u7ECF\u4FEE\u6EE1\u4E86"]):r>110&&(s=F(["\u4F60\u4EEC\u60F3\u5FC5\u5C31\u662F\u5377\u738B\u4E2D\u7684\u5377\u738B\u5427"])),{index996:r,index996Str:s,overTimeRadio:c,isStandard:V}}function Y({hourData:t,totalCount:e}){const a=e/t.length*9;return Math.ceil(e/a*100)-100}function j(t){const{workHourPl:e,workWeekPl:u}=t;let a="";const n=e[0].count+e[1].count,o=u[0].count+u[1].count;return n!==o&&(a="commit_is_fake"),a}function O(){const{hourData:t,weekData:e}=f(),{openingTime:u,closingTime:a,workHourPl:n}=A(t),{workDayTypeValue:o,workWeekPl:i}=b(e),{index996:d,overTimeRadio:l,isStandard:c}=R({workHourPl:n,workWeekPl:i,hourData:t}),r=Number(u==null?void 0:u.time),V=Number(a==null?void 0:a.time),s=[{label:"\u65E5\u5747\u5DE5\u4F5C\u65F6\u957F",key:"codeTime",unit:"h"},{label:"\u6BCF\u5468\u5DE5\u4F5C\u65F6\u957F",key:"weekTime",unit:"h"},{label:"\u6BCF\u5468\u52A0\u73ED\u65F6\u957F",key:"overtime",unit:"h"},{label:"\u52A0\u73ED\u65F6\u95F4\u5360\u6BD4",key:"overTimeRadio",unit:"%"},{label:"996\u6307\u6570",key:"index996",unit:""}],m=V-r;let E=0;V<=19?E=V-r-1.5:V>19&&(E=V-r-2.5);const p=E*o,_=(l*.01*p).toFixed(1),C={type:`${r||"?"}${V%12||"?"}${o||"?"}`,attendance:m,codeTime:E,weekTime:p,overtime:_,overTimeRadio:l,index996:d};let k=[{type:"955",attendance:8,codeTime:6.5,weekTime:32.5,overtime:-5,overTimeRadio:-11,index996:-33},{type:"965",attendance:9,codeTime:7.5,weekTime:37.5,overtime:0,overTimeRadio:0,index996:0},{type:"966",attendance:9,codeTime:7.5,weekTime:45,overtime:7.5,overTimeRadio:16,index996:48},{type:"995",attendance:12,codeTime:9.5,weekTime:47.5,overtime:10,overTimeRadio:21,index996:63},{type:"996",attendance:12,codeTime:9.5,weekTime:57,overtime:19.5,overTimeRadio:34,index996:100},{type:"997",attendance:12,codeTime:9.5,weekTime:66.5,overtime:29,overTimeRadio:44,index996:130},{type:"9126",attendance:15,codeTime:12.5,weekTime:75,overtime:37.5,overTimeRadio:50,index996:150}];return c&&(k=[...k,C].sort((y,B)=>y.index996-B.index996)),{tableConfig:s,tableData:k,index996:d,isStandard:c}}const Q={class:"table-box"},J={class:"container table"},K=Vue.createElementVNode("th",{class:"l"},"\u65F6\u95F4\u7C7B\u578B",-1),Z={class:"l"},ee=Vue.createElementVNode("p",{class:"tips"},"* \u9AD8\u4EAE\u5217\u4E3A\u8BE5\u9879\u76EE\u7684\u4F30\u7B97\u6307\u6807",-1),te=Vue.defineComponent({setup(t){const{tableConfig:e,tableData:u,index996:a,isStandard:n}=O(),o=i=>a===i&&n?"active":"";return(i,d)=>(Vue.openBlock(),Vue.createElementBlock("div",Q,[Vue.createElementVNode("table",J,[Vue.createElementVNode("thead",null,[Vue.createElementVNode("tr",null,[K,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u),l=>(Vue.openBlock(),Vue.createElementBlock("th",{class:Vue.normalizeClass(o(l.index996))},Vue.toDisplayString(l.type),3))),256))])]),Vue.createElementVNode("tbody",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(e),l=>(Vue.openBlock(),Vue.createElementBlock("tr",null,[Vue.createElementVNode("td",Z,Vue.toDisplayString(l.label),1),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u),c=>(Vue.openBlock(),Vue.createElementBlock("td",{class:Vue.normalizeClass(o(c.index996))},Vue.toDisplayString(c[l.key])+Vue.toDisplayString(l.unit),3))),256))]))),256))])]),ee]))}}),ue={class:"result"},oe=Vue.createElementVNode("h1",null,"#CODE996 Result",-1),ne={class:"main wrapper"},ce={class:"top-result container"},ae={key:0},re={class:"result-line"},se={key:0,class:"score-box"},le={class:"score-number"},ie={class:"content"},de={key:0},me=Vue.createTextVNode(" \u63A8\u6D4B\u4F60\u4EEC\u7684\u5DE5\u4F5C\u65F6\u95F4\u7C7B\u578B\u4E3A\uFF1A "),Ve={class:"p1"},Ee={class:"p2"},ke={key:1},Fe=Vue.createTextVNode(" \u63A8\u6D4B\u4F60\u4EEC\u7684\u52A0\u73ED\u65F6\u95F4\u5360\u6BD4\u4E3A\uFF1A "),pe={class:"p1"},_e={key:0,class:"p2"},Ce={key:2},ye={key:0},Be={key:1},he=Vue.createTextVNode(" \u603B commit \u6570\uFF1A "),fe={class:"p1"},ve=Vue.createTextVNode(" \u5206\u6790\u65F6\u95F4\u6BB5\uFF1A "),De={class:"p1"},Ne={key:1,class:"exp"},Te=Vue.createTextVNode(" 996 \u6307\u6570\uFF1A\u4E3A 0 \u5219\u4E0D\u52A0\u73ED\uFF0C\u503C\u8D8A\u5927\u4EE3\u8868\u52A0\u73ED\u8D8A\u4E25\u91CD\uFF0C996 \u5DE5\u4F5C\u5236\u5BF9\u5E94\u7684\u503C\u4E3A 100\uFF0C\u8D1F\u503C\u8BF4\u660E\u5DE5\u4F5C\u975E\u5E38\u8F7B\u677E\u3002 "),we={class:"content container"},ge={class:"section"},Ae={class:"item"},xe=Vue.createElementVNode("h2",null,"\u6309\u5C0F\u65F6 commit \u5206\u5E03",-1),be={key:0,class:"item"},Se=Vue.createElementVNode("h2",null,"\u52A0\u73ED/\u5DE5\u4F5C commit \u5360\u6BD4\uFF08\u6309\u5C0F\u65F6\uFF09",-1),Re={class:"section"},$e={class:"item"},Me=Vue.createElementVNode("h2",null,"\u6309\u5929 commit \u5206\u5E03",-1),Pe={key:0,class:"item"},We=Vue.createElementVNode("h2",null,"\u52A0\u73ED/\u5DE5\u4F5C commit \u5360\u6BD4\uFF08\u6309\u5929\uFF09",-1),He=Vue.createElementVNode("h2",{id:"compare-table"},"\u5DE5\u4F5C\u65F6\u95F4\u53C2\u7167\u8868\uFF1A",-1),Le=Vue.createElementVNode("div",{class:"container"},[Vue.createElementVNode("h2",{class:"title"},"\u6CE8\u610F\u4E8B\u9879\uFF1A"),Vue.createElementVNode("p",null,"\u5206\u6790\u7ED3\u679C\u4EC5\u4F9B\u53C2\u8003\uFF0C\u4E0D\u4EE3\u8868\u4EFB\u4F55\u5EFA\u8BAE"),Vue.createElementVNode("p",null,"\u539F\u59CB\u5206\u6790\u6570\u636E\u901A\u8FC7 URL \u4F20\u8F93\uFF0C\u8BF7\u614E\u91CD\u5206\u4EAB URL \u7ED9\u7B2C\u4E09\u65B9"),Vue.createElementVNode("p",null,"\u8BF7\u52FF\u7528\u4E8E\u6B63\u5F0F\u573A\u5408")],-1),Ue=Vue.defineComponent({setup(t){const e=Vue.ref([]),u=Vue.ref([]),a=Vue.ref([]),n=Vue.ref([]),o=Vue.ref({});function i(){const{hourData:c,weekData:r,timeStr:V,totalCount:s}=f(),{workingType:m,workingTypeStr:E,index996:p,index996Str:_,overTimeRadio:C,isStandard:k,workHourPl:y,workWeekPl:B}=X();e.value=[...c],u.value=[...r],a.value=[...y],n.value=[...B],o.value={workingType:m,workingTypeStr:E,totalCount:s,timeStr:V,index996:p,index996Str:_,overTimeRadio:C,isStandard:k}}const d=()=>{const c=document.getElementById("compare-table");c&&c.scrollIntoView({behavior:"smooth"})},l=()=>{L.push({name:"index"})};return G(),Vue.onMounted(()=>{i()}),(c,r)=>(Vue.openBlock(),Vue.createElementBlock("div",ue,[Vue.createElementVNode("div",{class:"top-bar"},[Vue.createElementVNode("div",{class:"wrapper"},[Vue.createElementVNode("span",{class:"button back",onClick:l},"\u8FD4\u56DE"),oe])]),Vue.createElementVNode("div",ne,[Vue.createElementVNode("div",ce,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("h1",ae,"\u8BE5\u9879\u76EE\u7684 996 \u6307\u6570\u662F\uFF1A")):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",re,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",se,[Vue.createElementVNode("div",le,Vue.toDisplayString(o.value.index996),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",ie,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",de,[me,Vue.createElementVNode("span",Ve,Vue.toDisplayString(o.value.workingType),1),Vue.createElementVNode("span",Ee,"("+Vue.toDisplayString(o.value.workingTypeStr)+")",1)])):Vue.createCommentVNode("",!0),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",ke,[Fe,Vue.createElementVNode("span",pe,Vue.toDisplayString(o.value.overTimeRadio)+"%",1),o.value.index996<0?(Vue.openBlock(),Vue.createElementBlock("span",_e,"(\u5DE5\u4F5C\u4E0D\u9971\u548C)")):Vue.createCommentVNode("",!0)])):Vue.createCommentVNode("",!0),o.value.isStandard?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("p",Ce,[o.value.totalCount<=50?(Vue.openBlock(),Vue.createElementBlock("span",ye,"\u8BE5\u9879\u76EE\u7684 commit \u6570\u91CF\u8FC7\u5C11\uFF0C\u53EA\u663E\u793A\u57FA\u672C\u4FE1\u606F")):(Vue.openBlock(),Vue.createElementBlock("span",Be,"\u8BE5\u9879\u76EE\u4E3A\u5F00\u6E90\u9879\u76EE\uFF0C\u53EA\u663E\u793A\u57FA\u672C\u4FE1\u606F"))])),Vue.createElementVNode("p",null,[he,Vue.createElementVNode("span",fe,Vue.toDisplayString(o.value.totalCount),1)]),Vue.createElementVNode("p",null,[ve,Vue.createElementVNode("span",De,Vue.toDisplayString(o.value.timeStr),1)])])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",Ne,[Te,Vue.createElementVNode("a",{onClick:d},"\u5177\u4F53\u53EF\u53C2\u8003\u4E0B\u65B9\u8868\u683C")])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",we,[Vue.createElementVNode("div",ge,[Vue.createElementVNode("div",Ae,[xe,Vue.createVNode(w,{data:e.value},null,8,["data"])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",be,[Se,Vue.createVNode(g,{data:a.value},null,8,["data"])])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Re,[Vue.createElementVNode("div",$e,[Me,Vue.createVNode(w,{data:u.value},null,8,["data"])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",Pe,[We,Vue.createVNode(g,{data:n.value},null,8,["data"])])):Vue.createCommentVNode("",!0)])]),He,Vue.createVNode(te),Le])]))}});export{Ue as default};
