var P=Object.defineProperty,M=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var D=(e,u,t)=>u in e?P(e,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[u]=t,N=(e,u)=>{for(var t in u||(u={}))q.call(u,t)&&D(e,t,u[t]);if(v)for(var t of v(u))L.call(u,t)&&D(e,t,u[t]);return e},T=(e,u)=>M(e,W(u));import{_ as H,r as U}from"./index.74ac6afa.js";const I=Vue.defineComponent({props:{data:{type:Array,default:()=>[]},chartType:{type:String,required:!0},options:{type:Object,default:()=>({backgroundColor:"#212121",strokeColor:"#fff"})}},setup(e,{expose:u}){const t=e,n=Vue.ref(null);let r=null;function o(){if(!n.value)return;const l=chartXkcd[t.chartType];if(!l){console.error(`\u56FE\u8868\u7C7B\u578B ${t.chartType} \u4E0D\u5B58\u5728`);return}r=new l(n.value,{data:{labels:t.data.map(d=>d.time),datasets:[{data:t.data.map(d=>d.count)}]},options:t.options})}return Vue.onMounted(()=>{Vue.nextTick(()=>{o()})}),u({chartInstance:r}),(l,d)=>(Vue.openBlock(),Vue.createElementBlock("svg",{class:"chart",ref_key:"chartRef",ref:n},null,512))}});var g=H(I,[["__scopeId","data-v-27860bf5"]]);const w=Vue.defineComponent({props:{data:{type:Array,default:()=>[]}},setup(e){const u={backgroundColor:"#212121",strokeColor:"#fff",unxkcdify:!1};return(t,n)=>(Vue.openBlock(),Vue.createBlock(g,{data:e.data,chartType:"Bar",options:u},null,8,["data"]))}}),A=Vue.defineComponent({props:{data:{type:Array,default:()=>[]}},setup(e){const u={backgroundColor:"#212121",strokeColor:"#fff"};return(t,n)=>(Vue.openBlock(),Vue.createBlock(g,{data:e.data,chartType:"Pie",options:u},null,8,["data"]))}});function x(e){const{openingTime:u,closingTime:t}=j(e),{workHourPl:n}=O(e,u);return{openingTime:u,closingTime:t,workHourPl:n}}function j(e){const u=e.reduce((c,a)=>c+a.count**2,0)/e.length,t=Math.sqrt(u),r=e.map((c,a)=>{var s,m;const V=c.count/t;return T(N({},c),{score:V,prevScore:(c.count-(((s=e[a-1])==null?void 0:s.count)||c.count))/t,nextScore:((((m=e[a+1])==null?void 0:m.count)||c.count)-c.count)/t})}).filter(c=>c.score>=.45),o=r.filter(c=>+c.time>=8&&+c.time<=12),l=r.filter(c=>+c.time>=17&&+c.time<=23),d=o.sort((c,a)=>Number(c.time)-Number(a.time))[0],i=l.sort((c,a)=>Number(a.time)-Number(c.time))[0];return{openingTime:d,closingTime:i}}function O(e=[],u){const t=e.filter(s=>+s.time>=+(u==null?void 0:u.time)&&+s.time<=+(u==null?void 0:u.time)+9),n=e.filter(s=>!t.includes(s)),r=t.reduce((s,m)=>s+m.count,0),o=n.reduce((s,m)=>s+m.count,0),l=e.sort((s,m)=>m.count-s.count),d=l.slice(0,9),i=l.slice(9,l.length+1),c=d.reduce((s,m)=>s+m.count,0),a=i.reduce((s,m)=>s+m.count,0);return{workHourPl:[{time:"\u5DE5\u4F5C",count:r,timeCount:d.length},{time:"\u52A0\u73ED",count:o,timeCount:i.length}],workingTimeCount:r,workingElseTimeCount:o,top9TimeCount:c,top9ElseTimeCount:a}}function b(e){return e.reduce((u,t)=>u+t.count,0)}function f(e,u,t=2){return+(e/u*100).toFixed(t)}function k(e=[]){return e[Math.floor(Math.random()*e.length)]}function S(e){const u=e.slice(0,5),t=e[5],n=e[6],r=b(e),o={workday:b(u),saturday:t.count,sunday:n.count},l={workday:f(o.workday,r),saturday:f(o.saturday,r),sunday:f(o.sunday,r)},d=[{time:"\u5DE5\u4F5C\u65E5",count:o.workday},{time:"\u5468\u672B",count:o.saturday+o.sunday}],i=z(l),a=[5,6,6,7,7][i-1];return{totalCount:r,commitCount:o,commitRatio:l,workDayType:i,workDayTypeValue:a,workWeekPl:d}}function z(e){let u=1;return e.workday>=90?u=1:e.workday>=85&&e.workday<90?u=2:e.workday>=79&&e.workday<85?u=3:e.workday>=72&&e.workday<79?u=4:e.workday<72&&(u=5),u}function R(e=""){if(!e)return console.warn("\u89E3\u6790\u7684URL\u53C2\u6570\u4E3A\u7A7A"),[];let u=[];try{e.split(",").forEach(t=>{if(!t.includes("_")){console.warn(`\u65E0\u6548\u7684\u683C\u5F0F: ${t}\uFF0C\u5E94\u4E3A 'count_time'`);return}const n=t.split("_");if(n.length!==2){console.warn(`\u65E0\u6548\u7684\u683C\u5F0F: ${t}\uFF0C\u5E94\u4E3A 'count_time'`);return}const r=Number(n[0]);if(isNaN(r)){console.warn(`\u65E0\u6548\u7684\u6570\u91CF\u503C: ${n[0]}`);return}u.push({time:n[1],count:r})})}catch(t){console.error("\u89E3\u6790URL\u53C2\u6570\u65F6\u51FA\u9519:",t)}return u}function G(e){return Array.isArray(e)?[{name:"\u5468\u4E00",key:"1"},{name:"\u5468\u4E8C",key:"2"},{name:"\u5468\u4E09",key:"3"},{name:"\u5468\u56DB",key:"4"},{name:"\u5468\u4E94",key:"5"},{name:"\u5468\u516D",key:"6"},{name:"\u5468\u65E5",key:"7"}].map(t=>{const n=e.find(r=>r.time===t.key);return{time:t.name,count:(n==null?void 0:n.count)||0}}):(console.warn("parseWeekData: \u8F93\u5165\u4E0D\u662F\u6570\u7EC4"),[])}function Y(){const e=VueRouter.useRouter(),{query:u}=e.currentRoute.value,n=["time","hour","week"].filter(o=>!u[o]);if(n.length>0){console.error(`\u7F3A\u5C11\u5FC5\u8981\u7684URL\u53C2\u6570: ${n.join(", ")}`),e.push({name:"index",query:{error:"url_query_error",missing:n.join(",")}});return}const r=u.time;(!r.includes("_")||r.split("_").length!==2)&&(console.error("\u65E0\u6548\u7684\u65F6\u95F4\u53C2\u6570\u683C\u5F0F"),e.push({name:"index",query:{error:"invalid_time_format"}}))}function B(){const e=VueRouter.useRouter(),{query:u}=e.currentRoute.value,t=R(u.hour),n=G(R(u.week)),r=u.time.split("_"),o=`${r[0]} \u223C ${r[1]}`,l=t.reduce((d,i)=>d+i.count,0);return{hourData:t,weekData:n,timeRange:r,timeStr:o,totalCount:l}}function Q(){const{hourData:e,weekData:u,totalCount:t}=B(),{openingTime:n,closingTime:r,workHourPl:o}=x(e),{workDayTypeValue:l,workWeekPl:d}=S(u),{index996:i,index996Str:c,overTimeRadio:a,isStandard:V}=$({workHourPl:o,workWeekPl:d,hourData:e}),s=J({workHourPl:o,workWeekPl:d,index996:i,overTimeRadio:a}),m=Number(n==null?void 0:n.time),E=Number(r==null?void 0:r.time)%12;return{workingType:`${m||"?"}${E||"?"}${l||"?"}`,workingTypeStr:`\u65E9 ${m||"?"} \u665A ${E||"?"} \u4E00\u5468 ${l||"?"} \u5929`,openingTime:n,closingTime:r,workDayTypeValue:l,workHourPl:o,workWeekPl:d,totalCount:t,index996:i,index996Str:c,overTimeRadio:a,isStandard:V,MSG_TYPE:s}}function $({workHourPl:e,workWeekPl:u,hourData:t}){const n=e[0].count,r=e[1].count,o=u[0].count,l=u[1].count,d=Math.round(r+n*l/(o+l)),i=n+r;let c=Math.ceil(d/i*100);c===0&&t.length<9&&(c=X({hourData:t,totalCount:i}));const a=c*3,V=a<200&&i>50;let s="";return a<=10?s=k(["\u4EE4\u4EBA\u7FA1\u6155\u7684\u5DE5\u4F5C","\u606D\u559C\uFF0C\u4F60\u4EEC\u6CA1\u6709\u798F\u62A5","\u4F60\u5C31\u662F\u642C\u7816\u754C\u7684\u6B27\u7687\u5427"]):a>10&&a<=50?s=k(["\u4F60\u8FD8\u6709\u5269\u4F59\u4EF7\u503C"]):a>50&&a<=90?s=k(["\u52A0\u6CB9\uFF0C\u8001\u677F\u7684\u6CD5\u62C9\u5229\u9760\u4F60\u4E86"]):a>90&&a<=110?s=k(["\u4F60\u7684\u798F\u62A5\u5DF2\u7ECF\u4FEE\u6EE1\u4E86"]):a>110&&(s=k(["\u4F60\u4EEC\u60F3\u5FC5\u5C31\u662F\u5377\u738B\u4E2D\u7684\u5377\u738B\u5427"])),{index996:a,index996Str:s,overTimeRadio:c,isStandard:V}}function X({hourData:e,totalCount:u}){const n=u/e.length*9;return Math.ceil(u/n*100)-100}function J(e){const{workHourPl:u,workWeekPl:t}=e;let n="";const r=u[0].count+u[1].count,o=t[0].count+t[1].count;return r!==o&&(n="commit_is_fake"),n}function K(){const{hourData:e,weekData:u}=B(),{openingTime:t,closingTime:n,workHourPl:r}=x(e),{workDayTypeValue:o,workWeekPl:l}=S(u),{index996:d,overTimeRadio:i,isStandard:c}=$({workHourPl:r,workWeekPl:l,hourData:e}),a=Number(t==null?void 0:t.time),V=Number(n==null?void 0:n.time),s=[{label:"\u65E5\u5747\u5DE5\u4F5C\u65F6\u957F",key:"codeTime",unit:"h"},{label:"\u6BCF\u5468\u5DE5\u4F5C\u65F6\u957F",key:"weekTime",unit:"h"},{label:"\u6BCF\u5468\u52A0\u73ED\u65F6\u957F",key:"overtime",unit:"h"},{label:"\u52A0\u73ED\u65F6\u95F4\u5360\u6BD4",key:"overTimeRadio",unit:"%"},{label:"996\u6307\u6570",key:"index996",unit:""}],m=V-a;let E=0;V<=19?E=V-a-1.5:V>19&&(E=V-a-2.5);const p=E*o,_=(i*.01*p).toFixed(1),C={type:`${a||"?"}${V%12||"?"}${o||"?"}`,attendance:m,codeTime:E,weekTime:p,overtime:_,overTimeRadio:i,index996:d};let F=[{type:"955",attendance:8,codeTime:6.5,weekTime:32.5,overtime:-5,overTimeRadio:-11,index996:-33},{type:"965",attendance:9,codeTime:7.5,weekTime:37.5,overtime:0,overTimeRadio:0,index996:0},{type:"966",attendance:9,codeTime:7.5,weekTime:45,overtime:7.5,overTimeRadio:16,index996:48},{type:"995",attendance:12,codeTime:9.5,weekTime:47.5,overtime:10,overTimeRadio:21,index996:63},{type:"996",attendance:12,codeTime:9.5,weekTime:57,overtime:19.5,overTimeRadio:34,index996:100},{type:"997",attendance:12,codeTime:9.5,weekTime:66.5,overtime:29,overTimeRadio:44,index996:130},{type:"9126",attendance:15,codeTime:12.5,weekTime:75,overtime:37.5,overTimeRadio:50,index996:150}];return c&&(F=[...F,C].sort((y,h)=>y.index996-h.index996)),{tableConfig:s,tableData:F,index996:d,isStandard:c}}const Z={class:"table-box"},ee={class:"container table"},ue=Vue.createElementVNode("th",{class:"l"},"\u65F6\u95F4\u7C7B\u578B",-1),te={class:"l"},oe=Vue.createElementVNode("p",{class:"tips"},"* \u9AD8\u4EAE\u5217\u4E3A\u8BE5\u9879\u76EE\u7684\u4F30\u7B97\u6307\u6807",-1),ne=Vue.defineComponent({setup(e){const{tableConfig:u,tableData:t,index996:n,isStandard:r}=K(),o=l=>n===l&&r?"active":"";return(l,d)=>(Vue.openBlock(),Vue.createElementBlock("div",Z,[Vue.createElementVNode("table",ee,[Vue.createElementVNode("thead",null,[Vue.createElementVNode("tr",null,[ue,(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(t),i=>(Vue.openBlock(),Vue.createElementBlock("th",{class:Vue.normalizeClass(o(i.index996))},Vue.toDisplayString(i.type),3))),256))])]),Vue.createElementVNode("tbody",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u),i=>(Vue.openBlock(),Vue.createElementBlock("tr",null,[Vue.createElementVNode("td",te,Vue.toDisplayString(i.label),1),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(t),c=>(Vue.openBlock(),Vue.createElementBlock("td",{class:Vue.normalizeClass(o(c.index996))},Vue.toDisplayString(c[i.key])+Vue.toDisplayString(i.unit),3))),256))]))),256))])]),oe]))}}),re={class:"result"},ce=Vue.createElementVNode("h1",null,"#CODE996 Result",-1),ae={class:"main wrapper"},se={class:"top-result container"},le={key:0},ie={class:"result-line"},de={key:0,class:"score-box"},me={class:"score-number"},Ve={class:"content"},Ee={key:0},Fe=Vue.createTextVNode(" \u63A8\u6D4B\u4F60\u4EEC\u7684\u5DE5\u4F5C\u65F6\u95F4\u7C7B\u578B\u4E3A\uFF1A "),ke={class:"p1"},pe={class:"p2"},_e={key:1},Ce=Vue.createTextVNode(" \u63A8\u6D4B\u4F60\u4EEC\u7684\u52A0\u73ED\u65F6\u95F4\u5360\u6BD4\u4E3A\uFF1A "),ye={class:"p1"},he={key:0,class:"p2"},fe={key:2},Be={key:0},ve={key:1},De=Vue.createTextVNode(" \u603B commit \u6570\uFF1A "),Ne={class:"p1"},Te=Vue.createTextVNode(" \u5206\u6790\u65F6\u95F4\u6BB5\uFF1A "),ge={class:"p1"},we={key:1,class:"exp"},Ae=Vue.createTextVNode(" 996 \u6307\u6570\uFF1A\u4E3A 0 \u5219\u4E0D\u52A0\u73ED\uFF0C\u503C\u8D8A\u5927\u4EE3\u8868\u52A0\u73ED\u8D8A\u4E25\u91CD\uFF0C996 \u5DE5\u4F5C\u5236\u5BF9\u5E94\u7684\u503C\u4E3A 100\uFF0C\u8D1F\u503C\u8BF4\u660E\u5DE5\u4F5C\u975E\u5E38\u8F7B\u677E\u3002 "),xe={class:"content container"},be={class:"section"},Se={class:"item"},Re=Vue.createElementVNode("h2",null,"\u6309\u5C0F\u65F6 commit \u5206\u5E03",-1),$e={key:0,class:"item"},Pe=Vue.createElementVNode("h2",null,"\u52A0\u73ED/\u5DE5\u4F5C commit \u5360\u6BD4\uFF08\u6309\u5C0F\u65F6\uFF09",-1),Me={class:"section"},We={class:"item"},qe=Vue.createElementVNode("h2",null,"\u6309\u5929 commit \u5206\u5E03",-1),Le={key:0,class:"item"},He=Vue.createElementVNode("h2",null,"\u52A0\u73ED/\u5DE5\u4F5C commit \u5360\u6BD4\uFF08\u6309\u5929\uFF09",-1),Ue=Vue.createElementVNode("h2",{id:"compare-table"},"\u5DE5\u4F5C\u65F6\u95F4\u53C2\u7167\u8868\uFF1A",-1),Ie=Vue.createElementVNode("div",{class:"container"},[Vue.createElementVNode("h2",{class:"title"},"\u6CE8\u610F\u4E8B\u9879\uFF1A"),Vue.createElementVNode("p",null,"\u5206\u6790\u7ED3\u679C\u4EC5\u4F9B\u53C2\u8003\uFF0C\u4E0D\u4EE3\u8868\u4EFB\u4F55\u5EFA\u8BAE"),Vue.createElementVNode("p",null,"\u539F\u59CB\u5206\u6790\u6570\u636E\u901A\u8FC7 URL \u4F20\u8F93\uFF0C\u8BF7\u614E\u91CD\u5206\u4EAB URL \u7ED9\u7B2C\u4E09\u65B9"),Vue.createElementVNode("p",null,"\u8BF7\u52FF\u7528\u4E8E\u6B63\u5F0F\u573A\u5408")],-1),ze=Vue.defineComponent({setup(e){const u=Vue.ref([]),t=Vue.ref([]),n=Vue.ref([]),r=Vue.ref([]),o=Vue.ref({});function l(){const{hourData:c,weekData:a,timeStr:V,totalCount:s}=B(),{workingType:m,workingTypeStr:E,index996:p,index996Str:_,overTimeRadio:C,isStandard:F,workHourPl:y,workWeekPl:h}=Q();u.value=[...c],t.value=[...a],n.value=[...y],r.value=[...h],o.value={workingType:m,workingTypeStr:E,totalCount:s,timeStr:V,index996:p,index996Str:_,overTimeRadio:C,isStandard:F}}const d=()=>{const c=document.getElementById("compare-table");c&&c.scrollIntoView({behavior:"smooth"})},i=()=>{U.push({name:"index"})};return Y(),Vue.onMounted(()=>{l()}),(c,a)=>(Vue.openBlock(),Vue.createElementBlock("div",re,[Vue.createElementVNode("div",{class:"top-bar"},[Vue.createElementVNode("div",{class:"wrapper"},[Vue.createElementVNode("span",{class:"button back",onClick:i},"\u8FD4\u56DE"),ce])]),Vue.createElementVNode("div",ae,[Vue.createElementVNode("div",se,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("h1",le,"\u8BE5\u9879\u76EE\u7684 996 \u6307\u6570\u662F\uFF1A")):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",ie,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",de,[Vue.createElementVNode("div",me,Vue.toDisplayString(o.value.index996),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",Ve,[o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",Ee,[Fe,Vue.createElementVNode("span",ke,Vue.toDisplayString(o.value.workingType),1),Vue.createElementVNode("span",pe,"("+Vue.toDisplayString(o.value.workingTypeStr)+")",1)])):Vue.createCommentVNode("",!0),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",_e,[Ce,Vue.createElementVNode("span",ye,Vue.toDisplayString(o.value.overTimeRadio)+"%",1),o.value.index996<0?(Vue.openBlock(),Vue.createElementBlock("span",he,"(\u5DE5\u4F5C\u4E0D\u9971\u548C)")):Vue.createCommentVNode("",!0)])):Vue.createCommentVNode("",!0),o.value.isStandard?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("p",fe,[o.value.totalCount<=50?(Vue.openBlock(),Vue.createElementBlock("span",Be,"\u8BE5\u9879\u76EE\u7684 commit \u6570\u91CF\u8FC7\u5C11\uFF0C\u53EA\u663E\u793A\u57FA\u672C\u4FE1\u606F")):(Vue.openBlock(),Vue.createElementBlock("span",ve,"\u8BE5\u9879\u76EE\u4E3A\u5F00\u6E90\u9879\u76EE\uFF0C\u53EA\u663E\u793A\u57FA\u672C\u4FE1\u606F"))])),Vue.createElementVNode("p",null,[De,Vue.createElementVNode("span",Ne,Vue.toDisplayString(o.value.totalCount),1)]),Vue.createElementVNode("p",null,[Te,Vue.createElementVNode("span",ge,Vue.toDisplayString(o.value.timeStr),1)])])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("p",we,[Ae,Vue.createElementVNode("a",{onClick:d},"\u5177\u4F53\u53EF\u53C2\u8003\u4E0B\u65B9\u8868\u683C")])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",xe,[Vue.createElementVNode("div",be,[Vue.createElementVNode("div",Se,[Re,Vue.createVNode(w,{data:u.value},null,8,["data"])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",$e,[Pe,Vue.createVNode(A,{data:n.value},null,8,["data"])])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",Me,[Vue.createElementVNode("div",We,[qe,Vue.createVNode(w,{data:t.value},null,8,["data"])]),o.value.isStandard?(Vue.openBlock(),Vue.createElementBlock("div",Le,[He,Vue.createVNode(A,{data:r.value},null,8,["data"])])):Vue.createCommentVNode("",!0)])]),Ue,Vue.createVNode(ne),Ie])]))}});export{ze as default};
